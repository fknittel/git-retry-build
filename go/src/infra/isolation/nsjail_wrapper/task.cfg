name: "task"

description: "A minimal config file for sensitive LUCI workloads"

cwd: "/b/s/w"

keep_env: true
clone_newnet: false

time_limit: 0
rlimit_as: 100000000000
rlimit_fsize: 50000
rlimit_nofile: 50001

use_cgroupv2: true

log_level: DEBUG


uidmap {
	inside_id: "chrome-bot"
	outside_id: "chrome-bot"
}

gidmap {
	inside_id: "chrome-bot"
	outside_id: "chrome-bot"
}

mount {
    src: "/"
    dst: "/"
    is_bind: true
    rw: true
}

seccomp_string: "KILL {"
seccomp_string: "  create_module,"
seccomp_string: "  delete_module,"
seccomp_string: "  finit_module,"
seccomp_string: "  init_module,"
seccomp_string: "  kexec_load,"
seccomp_string: "  kexec_file_load,"
seccomp_string: "  add_key,"
seccomp_string: "  keyctl,"
seccomp_string: "  request_key,"
seccomp_string: "  move_pages,"
seccomp_string: "  mbind,"
seccomp_string: "  set_mempolicy,"
seccomp_string: "  shmat,"
seccomp_string: "  exit,"
seccomp_string: "  reboot"
seccomp_string: "}"
seccomp_string: "LOG {"
seccomp_string: "  setuid,"
seccomp_string: "  setgid,"
seccomp_string: "  setreuid,"
seccomp_string: "  setregid,"
seccomp_string: "  ptrace,"
seccomp_string: "  chmod,"
seccomp_string: "  acct,"
seccomp_string: "  name_to_handle_at,"
seccomp_string: "  open_by_handle_at,"
seccomp_string: "  ioperm,"
seccomp_string: "  iopl,"
seccomp_string: "  get_mempolicy,"
seccomp_string: "  query_module,"
seccomp_string: "  adjtimex,"
seccomp_string: "  clock_adjtime,"
seccomp_string: "  clock_settime,"
seccomp_string: "  settimeofday,"
seccomp_string: "  swapon,"
seccomp_string: "  swapoff"
seccomp_string: "}"
seccomp_string: "DEFAULT ALLOW"

